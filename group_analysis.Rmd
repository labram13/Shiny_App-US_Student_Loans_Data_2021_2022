---
title: 'Group Project: 2020-2021 Student Loan Analysis'
author: "Group BD2"
date: "2023-02-28"
output: html_document
---

```{r message = FALSE}
library(tidyverse)
student_loans <- read_delim("data/Student Loan Debt by School 2020-2021.csv")
```

# Project Set-up (Data Analysis)
```{r, echo=FALSE}
# Dimensions & Column Names $ Sample 

dim(student_loans)
colnames(student_loans)
student_loans %>% 
  sample_n(10)

```
```{r echo=FALSE}
# Checking NAs

student_loans %>% 
  filter(is.na(City)) %>% 
  head(10)

student_loans %>%
  filter(is.na(State)) %>% 
  head(10) 

student_loans %>% 
  filter(is.na(School)) %>% 
  head(10)
```



### 1. Compute Average Loans per State. Possible top 10 (Mike)

```{r}
# Multiple terms for how loans were carried out. Here, I chose disbursement. 
# Since data is accumulative based on quarters of the year, we 
# filter out the max number for $ of disbursements for each school. 
# Then we calculate average loan by group the schools by state. 
student_loans %>% 
  filter(`Loan Type` == "Total",
         !is.na(`$ of Disbursements`),
         !is.na(State)) %>% 
  group_by(State, School) %>% 
  summarize(total_loans = max(`$ of Disbursements`)) %>% 
  group_by(State) %>% 
  summarize(avg_loan = mean(total_loans)) %>% 
  arrange(rank(desc(avg_loan))) %>% 
  head(10)
```



Numbers look good. Sorted from rank 1 to 50. 4 Additional states
included (Puerto Rico, DC, and so forth.)


### 2. Compute top 10 average loans by city. Organize city school loans by state (Nick)



### 3. Organize and arrange highest to lowest loan types taken out (Nathaniel)



### 4. Compute average number of recipients who received a loan per college. (Megan)
```{r}
student_loans %>%
  group_by(School) %>%
  filter(!is.na(School), !is.na(Recipients)) %>%
  summarise(avg = mean(Recipients)) %>%
  select(School, avg) %>%
  arrange(desc(avg))
```

### 5. Categorize public and private schools with their average loans taken out. (Everyone)

